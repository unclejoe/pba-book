---
title: Adding Privacy to the UTXO model
description: Explore some techniques for adding privacy to the UTXO model
duration: 30min
---

# 为UTXO模型添加隐私性

---

## 基于输入/输出的加密货币

- 交易将一系列未花费的交易输出（UTXO）作为其输入
- 每个输入都经过签名
- 该交易可以花费的资金额度等于其所有输入的总和
- 交易通过创建输出并支付手续费来花费资金

---

## 基于输入/输出的加密货币

- 输入必须仅引用实际存在的输出（成员性）
- 被花费的输出之前不能被花费过（可链接性）
- 输出的所有者必须同意此交易（所有权）
- 交易的输入和输出必须平衡（总和检查）

---

## 比特币

- 比特币指定了要花费的输出。
  这满足了成员性和可链接性
- 每个比特币输出都有一个小型的、非图灵完备的程序（脚本），用于指定如何花费该输出
- 每个输入都有一个 `scriptSig`，用于证明脚本已被满足，并且这是一次授权的花费（所有权）
- 输出不能超过输入，剩余部分成为手续费（总和检查）

---

## 零知识证明

- ZK-SNARKs - 一种小型证明，验证速度快（<= $O(\sqrt{n})$）
- ZK-sNARKs - 一种小型证明，验证速度不快（>= $O(n)$，通常为 $O(n log n)$）
- ZK-STARKs - 一种基于哈希函数的小型证明，验证速度快
- 所有这些都可以证明任意程序的执行（通过算术电路）
- 这些都不会透露关于程序参数的任何信息

---

## 默克尔证明

- 默克尔证明支持以对数时间复杂度证明一个项目存在于一棵树中
- 对于 $2^{20}$ 个项目，证明只需要20步
- 即使零知识证明是超线性的，它也是对数解决方案的超线性编码

---

## 私有成员性

- 当一个输出在链上创建时，将其添加到默克尔树中
- 当一个输入指定一个输出时，它直接包含它要花费的输出
- 它还包含一个默克尔证明，证明该输出存在于链上的某个位置，该证明嵌入在零知识证明中

---

## 佩德森承诺

- 佩德森承诺有一个值（某个数字）和一个掩码（也是某个数字）
- 掩码的数量与私钥的数量相同，用于隐藏包含的值
- 佩德森承诺可以扩展以支持多个值

---

## 新的输出定义

<pba-flex center>

- 标识符
- 金额
- 所有者
- 掩码
- 所有这些都在一个
  佩德森承诺中

</pba-flex>

---

## 私有成员性

- 我们不证明所包含的输出存在于链上
- 我们证明一个具有相同字段的输出存在于链上，但具有不同的掩码
- 这允许花费特定的输出，而不会透露是哪个输出

---

## 所有权和可链接性

- 零知识证明可以获取输出标识符并应用某种转换
- 对于每个输出标识符，该转换应该输出一个唯一的标识符
- 不是任何人都应该能够执行此转换
- 这提供了可链接性，并且如果只有所有者能够执行此转换，则提供了所有权

---

## 总和检查

- 最后一个零知识证明可以证明输入的总和 - 输出的总和 = 手续费
- 有更高效的方法来证明这一点

---

# 总结

- 这隐藏了被花费的输出和交易的金额
- 结合隐身地址协议（用一次性密钥替换地址），它还可以隐藏你向谁发送资金
- 这构建了一种在其链上交易方面具有隐私性的货币
