---
title: 加密学简介
description: 面向 Web3 构建者的加密学基础
duration: 1 小时
---

# 加密学简介

---

## 一些有用的公式

<img rounded style="height: 600px" src="./img/scary-equations.png" />

Notes:

开玩笑的！

---

## 本课目标

<pba-flex center>

- 理解加密学的目标
- 理解网络和上下文假设
- 了解加密学所维护的期望
- 学习加密学的基本原理

</pba-flex>

Notes:

在这第一课中

---

## 加密学领域

<img style="height: 700px; padding-left:100px" src="./img/crypto-mind-map.svg" />

Notes:

本课程涵盖的所有主题都是相互关联的。
我们不会在课程中涵盖任何关于混合或交互式协议的细节。

---

## 操作环境

##### _互联网是一个公共空间_

我们通过公共渠道进行通信
<p>对手可能想要：</p>

<pba-flex center>

- 偷窥消息
- 冒充他人
- 篡改消息

</pba-flex>


Notes:

以电子邮件为例，说明一个有缺陷的系统。

一些例子包括：

- 攻击者可能冒充你的老板，试图让你给他们汇款
- 攻击者可能会更改通过网络发送的消息，例如将转账 100 欧元的指令改为转账 10000 欧元

最好让老师让学生参与进来，提供应用程序消息的例子，而不仅仅是人与人之间的消息。

---

## 操作环境

##### _资源是受限的_

- **网络、存储、计算等**：我们不纠结发送、存储或操作的数据本身，但我们希望得到保证对消息的内容能达成一致
- **隐私**：我们必须假设所有渠道都可能被监控，因此封闭渠道受到严格限制（即假设不存在）

---

## 开放与封闭渠道

_基于公共系统的加密学更加可靠_

**Kerckhoff 原则**：安全不关注秘密的 _方法_ 而应该关注 _信息_ 的秘密

Notes:

不存在“封闭渠道”这种东西 :)

- 方法可以被逆向工程。
  之后，通信渠道就完全不安全了。
  例如，DVD 的 CSS 保护。
- 我们总是使用公开、开放的协议。

---

## *加密学保证*

<pba-flex center>

- 数据保密性
- 数据真实性
- 数据完整性
- 不可否认性

</pba-flex>

Notes:

这里通常没有完美和绝对的保证，但对于大多数实际用途来说，这些保证失败的界限已经足够满足我们作为工程师和用户的需求。
请注意这些假设，并随着时间的推移监控它们的有效性（如量子技术）。

---

## 重要的非保证

<pba-flex center>

- 数据可用性

</pba-flex>

<br />

仅靠加密学无法强有力地保证数据可用性

Notes:

有许多方案可以解决这个问题，这个话题将在课程后面提到。
我们将涉及擦除编码，这使得数据可用性更加高效。

---

## 数据保密性

只有当一方知道某个秘密（密钥）时他们才能访问信息

<br />

保密性确保第三方无法读取我的机密数据

Notes:

解密某些数据并揭示其底层信息的能力直接意味着知道某个秘密，而这个秘密可能是信息的创建者所不知道的。
提供原始信息（即明文消息）可以用作“挑战游戏”机制中的一种手段，用于在不泄露秘密的情况下证明对秘密的了解。

提到“明文”这个术语。

寓言：存储在服务器上的私人文档，系统管理员有权访问，这可能会违反律师-客户特权。

---v

<!-- 这张幻灯片应该可能被推到关于加密的讲座中。我可以在任何一个地方看到它。或者，可以完全删除，因为加密通信不是一个强调的话题。 -->

## 通信渠道中的保密性

假设 Alice 和 Bob 正在相互发送机密消息
<br />
就有下列保密性子类型：

- **前向保密性**：即使对手暂时了解了 Alice 的秘密 它也无法读取未来某个点之后的消息
- **后向保密性**：即使对手暂时了解了 Alice 的秘密 它也无法读取过去某个点之前的消息

---

## 数据真实性

用户可以有 **可信** 的期望 即消息的声明来源是真实的

<br />

真实性确保第三方无法冒充我创建了某些数据

Notes:

- 数字签名应该难以（实际上是不可能）伪造。
- 数字签名应该验证签名者知道某个秘密，而不泄露秘密本身。

---

## 数据完整性

如果数据被篡改 就可以被检测到

<br />

换句话说 检查某些数据的当前状态是否与创建时一致是可能的

<br />

完整性确保如果我创建的数据被损坏 它可以被检测到

---v

## 物理签名

物理签名提供弱真实性保证
<br />
即它们很容易被伪造并且没有完整性保证

---v

## 理想的签名

<img style="width: 900px;" src="./img/Data-Integrity.png" />

Notes:

例如，如果你更改大学文凭上的年份，院长的签名仍然有效。
数字签名提供了一个保证，即签名的信息没有被篡改。

---

## 不可否认性

消息的发送者不能否认发送了该消息

<br />

不可否认性确保如果 Bob 给我发送了一些数据 我可以向第三方证明 Bob 发送了它

---

## 单向函数

单向函数构成了 **(加密学)哈希** 和 **非对称加密学** 的基础

<br />

一个函数 $f$ 是单向的，如果：

<pba-flex center>

- 它的计算速度相当快
- 它的逆运算非常非常慢

</pba-flex>
Notes:

有很多关于为什么这些函数难以逆向的假设，但我们无法严格证明它。
我们经常用数学游戏或预言机来表达逆向问题。

---

## 哈希函数

**动机**：我们经常想要一个简洁但唯一地表示某些（可能很大）数据的方式

</br>

指纹比一个人小得多 但唯一地识别一个人

Notes:

以下幻灯片作为介绍。
许多术语可能会被忽略，并在后面详细介绍。
本模块后面有专门针对哈希和基于哈希的数据结构的课程。

---v

## 哈希函数应用

哈希有许多应用：

<pba-flex center>

- 表示更大的数据对象<br />(历史、承诺、文件)
- 数据库中的键
- 数字签名
- 密钥派生
- 伪随机函数

</pba-flex>

---

## 对称加密学

对称加密假设所有各方都从一些双方共享的秘密信息开始 这是潜在的非常困难的
<br />
共享的秘密被用于保护通信数据使其免受不知道该秘密的其他人攻击

本质上这种方法会随着时间的推移增加 _泄露_ 共享秘密的风险

Notes:

请记住，这些通信是通过一个 _开放通道_ 进行的，因为我们假设所有通道都可以被监控

---

## 对称加密学

例如二战中的恩尼格玛密码机 这个 _通道_ 机制是通过在两个参与者之间共享一个秘密（“密钥”）来启动的
<br />使用密码机，这些参与者可以安全地交换信息

然而由于密钥只包含有限的 _熵_ （“信息”） 
<br />使用足够多的次数后最终会泄露 使盟军能够解码消息即使每天改变一次也不够

Notes:

当通过一个仅受一定量熵保护的通道进行通信时，仍然可以通过引入 _新熵_ 来基本上无限期地扩展消息，这些新熵用于足够频繁地保护通道。

---

## 非对称加密学

- 在非对称加密学中，我们设计了一种方法来将一个值（“秘密”）转换为某个相应的对应物（“公钥”），同时保留某些特性

- 我们认为这是一个单向函数（即没有简单/快速的逆函数）

- 除了保留某些特性外，我们相信这个对应物（“公钥”）不会泄露关于秘密的任何信息

---

## 非对称加密

_仅使用公钥_ 信息可以被转换（“加密”）使得只有那些知道秘密的人才能逆向并恢复原始信息

---

## 数字签名

- _使用秘密密钥_ 信息可以被转换（“签名”）使得任何知道信息和对应公钥的人都能够确认签名

- 数字签名提供消息真实性和完整性保证

- _有两节课专门讨论数字签名_

---

## 数字签名

**签名函数**：一个函数作用于某些<br /> _消息数据_ 和某些 _秘密_ 以产生一个 _签名_

一个 **签名** _证明_ 签名者知道这个秘密，<br />而不泄露秘密本身

签名不能被用来创建其他签名并且对于消息是唯一的

Notes:

一个 **签名函数** 是一个纯函数，它操作于某些 _消息数据_（这可能很小，也可能很大，取决于函数）和某些 _秘密_（一个小的信息片段，只有操作者知道）
这个函数的结果是一个小的数据片段，称为 _签名_

纯意味着它没有副作用。

它有一个特殊的属性：它证明（在合理的怀疑之外）签名者（即签名函数的操作者）知道这个秘密，并且利用这个知识与特定的 _消息_ 数据一起使用，但它不泄露秘密本身，也不能利用签名的知识来创建其他签名（例如，对于替代的消息数据）。

---

## 加密学签名的不可否认性

有加密学证明 秘密被签名者所知

<br />

签名者不能声称签名是伪造的 除非他们能够辩护说秘密在签名之前就已经泄露了<br />

---

## 实际考虑

**对称加密学** 快得多 但需要更多的设置（密钥建立）和信任（其他人知道这个秘密）

**非对称加密学** 较慢 但通常保留特定的数学关系 适用加密多样性及弹性的协议

---

## 混合加密学

混合加密学将不同的加密学原语组合成新的机制

例如：

<pba-flex center>

- 对称加密可以提供速度并且通常提供保密性
- 哈希函数可以减少数据的大小同时保留身份
- 非对称加密学可以决定参与者之间的关系

</pba-flex>
---

## 认证

认证用于对公共密钥关系进行证明

通常以_签名_的形式出现 对以下内容进行签名：

- 一个或多个加密学强标识符（例如，公钥，哈希）
- 关于其所有权、使用和任何其他属性的信息 这些信息是签名者能够证明/授权/见证的
- _(元)信息_ 关于信息本身的信息 例如它的有效期和会使其无效的外部考虑因素

Notes:

- 实际应用是 SSL 证书的层次结构。
  - 根密钥 -> 国家级实体 -> 较小的实体。
- 信任网络和 GPG 交叉签名
- 在基于签名的证书的情况下，只要你有签名、数据和原始公钥，你就可以信任证书，无论它来自哪里。它可以张贴在公共留言板上，私下发送给你，或者刻在石头上。

---

## 熵、随机性和密钥大小

<pba-flex center>

- 熵：包含在某些数据中的非冗余信息量
- 随机性：某些信息的不可预测性 随机性越低熵就越低
- 密钥大小：密钥中可能包含的熵的上限 包含较少随机（更可预测）数据的密钥的熵低于这个上限
- 一次性密码本：一个实际上无限大小的密钥 如果它是完全随机的（即具有最大熵）那么这个密码在理论上是不可破解的

</pba-flex>

Notes:

提到即将到来的“多次密码本”活动，它利用一次性密码本多次使用。

---

## 随机性生成

<pba-flex center>

```rust
fn roll_die() -> u32 {
  // 保证随机：它是通过真实的骰子滚动实现的。
  4u32
}
```

- 伪随机序列
- 物理数据收集（例如，光标移动，麦克风的最低有效位）
- 专用硬件（例如，晶体管门电路的低级别噪声 量子放大器）

</pba-flex>

Notes:

LSB := 最低有效位

---

## 总结

加密学不仅仅是加密

<pba-flex center>

- 在公共网络上公开交流
- 访问信息
- 对消息的真实性和完整性有期望
- 证明对某些秘密信息的了解
- 简洁地表示大量数据

</pba-flex>

---

<!--.slide: data-background-color="#4A2439" -->

# 问题

<img style="height: 600px" src="./img/crypto-mind-map.svg" />

##### _收获？_

Notes:

课堂讨论。
最后一张幻灯片。